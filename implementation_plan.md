# まあるのコメント道場 - 実装計画書

## 🎯 開発フェーズ構成

### フェーズ1: 基盤構築 (Week 1-2)
プロジェクトの土台となる基本システムの構築

### フェーズ2: コアシステム (Week 3-4)
ゲームの中核となるメカニクスの実装

### フェーズ3: UI・UX (Week 5-6)
ユーザーインターフェースと操作体験の実装

### フェーズ4: コンテンツ (Week 7-8)
ゲームコンテンツとデータの実装

### フェーズ5: 演出・音響 (Week 9-10)
ゲームの魅力を高める演出要素の実装

### フェーズ6: 最終調整 (Week 11-12)
最適化、テスト、品質保証

---

## 📋 詳細実装順序

### 🏗️ フェーズ1: 基盤構築

#### 1.1 プロジェクトセットアップ
- [ ] **Unity 2022.3 LTS** プロジェクト作成
- [ ] **フォルダ構成** 作成
  ```
  Assets/
  ├── Scripts/
  │   ├── Core/
  │   ├── UI/
  │   ├── Comment/
  │   ├── Audio/
  │   └── Managers/
  ├── Prefabs/
  ├── Sprites/
  ├── Audio/
  └── Materials/
  ```
- [ ] **基本シーン** 作成
  - 00_MainMenu.unity
  - 01_GameLevel.unity
  - 02_Result.unity
  - 03_Settings.unity

#### 1.2 基本システム構築
- [ ] **GameManager** 基本クラス実装
  - シングルトンパターン
  - ゲーム状態管理（Start, Playing, Paused, GameOver）
  - 基本的なゲームループ
- [ ] **SceneManager** 実装
  - シーン遷移制御
  - 基本的なフェードイン・アウト
- [ ] **InputManager** 基本実装
  - New Input System セットアップ
  - PC/モバイル統一入力処理

### 🎮 フェーズ2: コアシステム

#### 2.1 コメントシステム基盤
- [ ] **CommentBase** 抽象クラス実装
  - コメントの基本プロパティ
  - 移動処理インターフェース
  - 状態管理（Normal, Cracked, Destroyed）
- [ ] **CommentMover** 実装
  - 右から左への移動処理
  - 移動速度制御
  - 画面外判定
- [ ] **CommentSpawner** 基本実装
  - コメント生成制御
  - スポーン位置管理
  - 生成間隔制御

#### 2.2 入力システム詳細実装
- [ ] **TouchInputHandler** 実装
  - タッチ検出
  - 2回タップ検出
  - マルチタッチ対応
- [ ] **MouseInputHandler** 実装
  - マウスクリック検出
  - 2回クリック検出
  - ホバー処理

#### 2.3 ゲームメカニクス実装
- [ ] **FaithSystem** 実装
  - 信仰度管理
  - 信仰度計算ロジック
  - 信仰度変化イベント
- [ ] **HealthSystem** 実装
  - 体力管理
  - 体力減少処理
  - 体力回復処理
- [ ] **InflamationSystem** 実装
  - 炎上メーター管理
  - 炎上状態制御
  - 炎上効果適用

### 🎨 フェーズ3: UI・UX

#### 3.1 UI基盤構築
- [ ] **UIManager** 実装
  - UI要素の表示制御
  - アニメーション管理
  - 画面サイズ対応
- [ ] **Canvas設定** 最適化
  - Screen Space - Overlay設定
  - 解像度対応
  - プラットフォーム別UI調整

#### 3.2 ゲームUI実装
- [ ] **TopPanel** 実装
  - 信仰度表示（Text）
  - 体力バー（Slider）
  - 炎上メーター（Slider）
- [ ] **GameArea** 実装
  - コメント表示エリア
  - 背景設定
  - レイアウト調整
- [ ] **CharacterArea** 実装
  - マール立ち絵表示
  - 反応テキスト表示
  - 表情切り替え

#### 3.3 メニューUI実装
- [ ] **MainMenuUI** 実装
  - スタートボタン
  - 設定ボタン
  - 終了ボタン
- [ ] **SettingsUI** 実装
  - 音量調整
  - 操作設定
  - 言語設定
- [ ] **ResultUI** 実装
  - スコア表示
  - ランク表示
  - リトライ・メニュー戻りボタン

### 📝 フェーズ4: コンテンツ

#### 4.1 コメント種別実装
- [ ] **HolyComment** 実装
  - 聖なるコメント処理
  - 自動処理ロジック
  - 報酬付与処理
- [ ] **OhoeComment** 実装
  - おおえのネタコメント処理
  - 1回タップ処理
  - 混乱状態適用
- [ ] **TrollComment** 実装
  - 荒らしコメント処理
  - 2回タップ処理
  - ヒビエフェクト
  - 炎上状態適用
- [ ] **SuperChatComment** 実装
  - スパチャコメント処理
  - 金額別報酬
  - 特殊エフェクト

#### 4.2 マールキャラクター実装
- [ ] **MarleController** 実装
  - 表情制御システム
  - 反応テキスト管理
  - アニメーション制御
- [ ] **MarleReactionSystem** 実装
  - コメント種別別反応
  - 反応パターン管理
  - 反応タイミング制御
- [ ] **MarleVoiceSystem** 実装
  - ボイス再生制御
  - 感情状態管理
  - ボイス種別管理

#### 4.3 レベルシステム実装
- [ ] **LevelData** ScriptableObject作成
  - レベル設定データ
  - 難易度パラメータ
  - コメント分布設定
- [ ] **LevelManager** 実装
  - レベル進行制御
  - 難易度調整
  - 目標管理
- [ ] **ProgressManager** 実装
  - 進行状況保存
  - 解放レベル管理
  - 実績システム

### 🎵 フェーズ5: 演出・音響

#### 5.1 音響システム実装
- [ ] **AudioManager** 実装
  - BGM管理
  - SE管理
  - ボイス管理
  - 音量制御
- [ ] **効果音実装**
  - Success音（チーン♪）
  - SuperChat音（チャリーン♪）
  - Crack音（パキッ）
  - Destroy音（バン！）
  - Miss音（あわわ...）
- [ ] **BGM実装**
  - メインBGM
  - 緊急時BGM
  - メニューBGM
  - リザルトBGM

#### 5.2 エフェクトシステム実装
- [ ] **ParticleManager** 実装
  - エフェクト管理
  - パーティクル制御
  - オブジェクトプール
- [ ] **成功エフェクト** 実装
  - キラキラパーティクル
  - 信仰度上昇演出
  - 成功フィードバック
- [ ] **削除エフェクト** 実装
  - 爆発パーティクル
  - ヒビエフェクト
  - 削除アニメーション
- [ ] **スパチャエフェクト** 実装
  - コイン・お札アニメーション
  - 金額別演出
  - 特殊パーティクル

#### 5.3 UI演出実装
- [ ] **UIアニメーション** 実装
  - フェードイン・アウト
  - スライドアニメーション
  - スケールアニメーション
- [ ] **フィードバック演出** 実装
  - ボタンアニメーション
  - ホバー効果
  - タップエフェクト
- [ ] **ゲーム演出** 実装
  - レベルアップ演出
  - ゲームオーバー演出
  - クリア演出

### 🔧 フェーズ6: 最終調整

#### 6.1 最適化
- [ ] **パフォーマンス最適化**
  - フレームレート安定化
  - メモリ使用量削減
  - バッテリー消費軽減
- [ ] **プラットフォーム対応**
  - PC版最適化
  - モバイル版最適化
  - 解像度対応
- [ ] **アセット最適化**
  - テクスチャ圧縮
  - 音声圧縮
  - アニメーション最適化

#### 6.2 セーブシステム実装
- [ ] **SaveDataManager** 実装
  - セーブデータ構造
  - 暗号化処理
  - データ検証
- [ ] **進行状況保存** 実装
  - レベル進行状況
  - 実績データ
  - 設定データ
- [ ] **クラウドセーブ** 基盤実装
  - 将来的な拡張対応
  - データ同期機能
  - 競合解決

#### 6.3 テスト・デバッグ
- [ ] **デバッグ機能** 実装
  - ゲーム状態表示
  - コメント強制生成
  - 無敵モード
  - タイムスケール調整
- [ ] **品質保証**
  - 機能テスト
  - UI/UXテスト
  - パフォーマンステスト
  - プラットフォームテスト
- [ ] **バグ修正**
  - 発見されたバグの修正
  - エラーハンドリング
  - 例外処理強化

---

## 🎯 マイルストーン

### マイルストーン1: プロトタイプ完成 (Week 4)
- 基本的なコメント生成・移動・処理が動作
- 簡単な信仰度システムが機能
- 基本UI表示

### マイルストーン2: アルファ版 (Week 8)
- 全コメント種別の処理が実装
- マールの反応システムが動作
- 基本的なゲームループが完成

### マイルストーン3: ベータ版 (Week 10)
- 音響・エフェクトが実装
- レベルシステムが完成
- UI/UXが完成

### マイルストーン4: リリース版 (Week 12)
- 最適化完了
- デバッグ機能実装
- 品質保証完了

---

## 🔍 重要な技術的考慮事項

### パフォーマンス
- **オブジェクトプール** を使用してコメント生成を最適化
- **UI描画** の最適化でフレームレート安定化
- **メモリ管理** でガベージコレクション最小化

### クロスプラットフォーム
- **New Input System** で統一された入力処理
- **uGUI** でスケーラブルなUI
- **解像度対応** で複数端末サポート

### メンテナンス性
- **ScriptableObject** でデータとロジックを分離
- **イベントシステム** で疎結合な設計
- **モジュラー設計** で拡張しやすい構造

---

## 📊 開発リソース見積もり

### 開発工数
- **プログラマー**: 1名 × 12週間
- **アーティスト**: 0.5名 × 8週間（アセットストア活用）
- **サウンドデザイナー**: 0.5名 × 4週間

### 必要アセット
- **キャラクター画像**: マール立ち絵・表情差分
- **UI素材**: ボタン・パネル・アイコン
- **音響素材**: BGM・SE・ボイス
- **エフェクト素材**: パーティクル・アニメーション

### 開発環境
- **Unity 2022.3 LTS**
- **Visual Studio/VS Code**
- **Git（バージョン管理）**
- **アセットストア**

---

*この実装計画書は開発進行に応じて更新・調整されます。*