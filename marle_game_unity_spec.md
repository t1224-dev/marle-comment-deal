# まあるのコメント道場 Unity版ゲーム仕様書

## 📋 基本情報

- **ゲームタイトル**: まあるのコメント道場
- **ジャンル**: アクション・タイピング・シミュレーション
- **プラットフォーム**: PC（Windows/Mac）、モバイル（iOS/Android）
- **開発エンジン**: Unity 2022.3 LTS
- **対象年齢**: 全年齢

## 🎯 ゲームコンセプト

VTuber「マール・アストレア」として配信を行い、流れてくるコメントを適切に処理して信仰度を獲得するアクションゲーム。コメント欄の管理能力が試される、VTuber配信体験ゲーム。

## 🎮 基本ゲームシステム

### ゲームフロー
1. 配信開始（マール登場）
2. コメントが右から左に流れる
3. プレイヤーが適切にコメント処理
4. 制限時間内に目標信仰度達成を目指す
5. 配信終了・結果発表

### 操作方法
- **PC**: マウスクリック・キーボード
- **モバイル**: タッチ操作
- **放置**: 何もしない
- **タップ**: 1回タップ/クリック
- **2回タップ**: 連続で2回タップ（荒らしコメント削除用）

## 📝 コメント分類システム

### 🟢 聖なるコメント（放置推奨）
**内容例**: 「マールちゃん可愛い！」「歌声に癒された」「今日もお疲れさま」

- **処理方法**: 何もしない（左端到達で自動処理）
- **成功報酬**: +8信仰度
- **マール反応**: 「ありがとうございます♪」「嬉しいです！」
- **ペナルティ**: なし

### 🟡 おおえのネタコメント（要注意）
**内容例**: 「CV:おおえのたかゆき」「中の人バレてるよ」「本人降臨」

- **処理方法**: タップで無視
- **成功報酬**: +12信仰度
- **マール反応**: 「えーっと...次の話題に行きましょうか〜」
- **放置ペナルティ**: -15信仰度 + 混乱状態2秒
- **混乱効果**: 他コメント処理速度20%低下

### 🔴 荒らしコメント（緊急対処）
**内容例**: 誹謗中傷、スパム、「つまらない」「やめろ」

- **処理方法**: 2回タップで削除
  - **1回目**: コメントにヒビが入る（削除予約状態）
  - **2回目**: 完全削除
- **成功報酬**: +15信仰度
- **マール反応**: 「みんなで楽しく過ごしましょうね」
- **放置ペナルティ**: -25信仰度 + 体力-1 + 炎上状態5秒
- **炎上効果**: 荒らしコメント出現率+50%

### 💰 スパチャ（ボーナス要素）
**内容例**: 「￥100 マールちゃん頑張って！」「￥5000 マール・アストレア最高！」

- **処理方法**: タップで受け取り
- **成功報酬**:
  - ￥100: +20信仰度
  - ￥500: +35信仰度
  - ￥1000: +60信仰度
  - ￥5000: +120信仰度
- **マール反応**: 金額に応じて感動度アップ
- **放置ペナルティ**: なし（ただし報酬も得られない）

## 🏗️ Unity プロジェクト構成

### シーン構成
```
📁 Scenes/
  ├── 00_MainMenu.unity          // メインメニュー
  ├── 01_GameLevel.unity         // ゲームプレイ
  ├── 02_Result.unity            // リザルト画面
  └── 03_Settings.unity          // 設定画面
```

### フォルダ構成
```
📁 Assets/
  ├── 📁 Scripts/
  │   ├── 📁 Core/               // ゲームコア機能
  │   ├── 📁 UI/                 // UI関連
  │   ├── 📁 Comment/            // コメントシステム
  │   ├── 📁 Audio/              // 音響システム
  │   └── 📁 Managers/           // 各種マネージャー
  ├── 📁 Prefabs/
  │   ├── 📁 Comments/           // コメントプレハブ
  │   ├── 📁 UI/                 // UIプレハブ
  │   └── 📁 Effects/            // エフェクトプレハブ
  ├── 📁 Sprites/
  │   ├── 📁 Characters/         // キャラクター画像
  │   ├── 📁 UI/                 // UI素材
  │   └── 📁 Effects/            // エフェクト画像
  ├── 📁 Audio/
  │   ├── 📁 BGM/                // BGM音源
  │   ├── 📁 SE/                 // 効果音
  │   └── 📁 Voice/              // ボイス
  └── 📁 Materials/              // マテリアル
```

## 🎨 Unity UI設計（uGUI使用）

### メインゲーム画面レイアウト
```
Canvas (Screen Space - Overlay)
├── TopPanel
│   ├── FaithText (Text)        // 信仰度表示
│   ├── HealthBar (Slider)      // 体力バー
│   └── InflamationBar (Slider) // 炎上メーター
├── GameArea (RectTransform)
│   └── CommentSpawnArea        // コメント生成エリア
├── CharacterArea
│   ├── MarleImage (Image)      // マール立ち絵
│   └── ReactionText (Text)     // マールの反応テキスト
└── UIEffects
    └── ParticleSystem          // UIエフェクト
```

### コメントプレハブ構成
```
CommentPrefab (GameObject)
├── Background (Image)          // 背景
├── CommentText (Text)          // コメント内容
├── IconImage (Image)           // 種別アイコン
├── CommentMover (Script)       // 移動制御
├── CommentInteraction (Script) // タップ処理
└── EffectContainer
    ├── CrackEffect             // ヒビエフェクト
    └── DestroyEffect           // 削除エフェクト
```

## 🛠️ 主要スクリプト設計

### 必要なスクリプトコンポーネント

#### GameManager
- ゲーム全体の状態管理
- 信仰度・体力・炎上メーターの管理
- ゲームオーバー・クリア判定
- レベル進行制御

#### CommentSpawner
- コメント生成システム
- 確率分布に基づくコメント種別決定
- スポーン間隔・位置制御
- レベル別難易度調整

#### CommentController
- 個別コメントの制御
- 移動処理・タップ検出
- 状態管理（通常・ヒビ・削除）
- 左端到達時の自動処理

#### MarleController
- マールの表情・反応制御
- コメント種別に応じた反応
- アニメーション制御
- ボイス再生タイミング

#### UIManager
- UI要素の更新・表示制御
- スコア表示・バー更新
- ゲーム結果表示
- メニュー遷移制御

#### AudioManager
- BGM・SE・ボイス管理
- 動的音量調整
- 効果音の種別管理
- 音響フィードバック制御

## 🎵 オーディオシステム

### オーディオ構成
- **BGMSource**: メインBGM・緊急時BGM
- **SESource**: 効果音再生用
- **VoiceSource**: マールのボイス再生用

### 効果音種別
- **Success**: チーン♪（正解音）
- **SuperChat**: チャリーン♪（スパチャ音）
- **CrackSound**: パキッ（ヒビ音）
- **Destroy**: バン！（削除音）
- **Miss**: あわわ...（ミス音）

### ボイス種別
- **Greeting**: 「癒されにきませんか？」
- **Happy**: 「ありがとうございます♪」
- **Confused**: 「えーっと...」
- **Calm**: 「みんなで楽しく過ごしましょうね」

## 🎯 パーティクルエフェクト

### エフェクト種類
- **SuccessEffect**: 成功時のキラキラパーティクル
- **SuperChatEffect**: スパチャ収集時のコイン・お札アニメーション
- **DestroyEffect**: コメント削除時の爆発パーティクル
- **CrackEffect**: ヒビ表示エフェクト

### エフェクト配置
- **UI空間**: Screen Space - Overlay Canvas内
- **ワールド空間**: コメント位置に追従
- **固定位置**: マールキャラクター周辺

## 📊 レベル設計（ScriptableObject）

### レベルデータ構造
- **基本設定**: レベル番号・制限時間・目標信仰度
- **体力設定**: 初期体力・パーフェクト条件
- **コメント分布**: 各種コメントの出現確率
- **難易度調整**: スポーン間隔・移動速度

### レベル設定例

#### Level 1: デビュー配信
- 制限時間: 1分（60秒）
- 目標信仰度: 200
- 初期体力: 5
- コメント分布: 聖なる65% / おおえの20% / 荒らし5% / スパチャ10%

#### Level 5: バズ期
- 制限時間: 1分30秒（90秒）
- 目標信仰度: 400
- 初期体力: 4
- コメント分布: 聖なる35% / おおえの40% / 荒らし15% / スパチャ10%

#### Level 10: 人気配信者
- 制限時間: 2分（120秒）
- 目標信仰度: 700
- 初期体力: 3
- コメント分布: 聖なる40% / おおえの15% / 荒らし25% / スパチャ20%

## 📱 プラットフォーム対応

### PC版設定
- **解像度**: 1920×1080 基準
- **入力**: マウス・キーボード
- **UI**: 大きめボタン・詳細表示

### モバイル版設定
- **解像度**: 複数解像度対応
- **入力**: タッチ操作最適化
- **UI**: タッチしやすいサイズ調整

### 共通最適化
- **パフォーマンス**: フレームレート安定化
- **メモリ**: 効率的なアセット管理
- **バッテリー**: 消費電力抑制

## 🎮 ゲームオーバー・クリア条件

### ゲームオーバー条件
1. **体力ゼロ**: 「ごめんなさい...今日はここまでにします」
2. **炎上100%**: 「申し訳ありません、配信を終了します...」
3. **信仰度-100以下**: 「誰もいなくなっちゃった...」
4. **連続ミス5回**: 「あわわ...配信の調子が...」

### クリア条件
- **🥉 最低クリア**: 制限時間内生存 + 信仰度プラス維持
- **🥈 目標クリア**: 目標信仰度達成
- **🥇 パーフェクト**: 目標達成 + 体力維持 + 炎上低レベル + ミス少数

## 💾 セーブ・ロードシステム

### セーブデータ内容
- **進行状況**: 現在レベル・総信仰度
- **実績**: レベル別星獲得状況
- **記録**: ベストスコア・アチーブメント
- **設定**: 音量・言語設定

### セーブ方式
- **PC**: PlayerPrefs使用
- **モバイル**: 端末内ローカル保存
- **クラウド**: 将来的な機能拡張対応

## 🏆 やりこみ要素

### アチーブメント
- **見習い神官**: 初回クリア
- **洗礼堂の管理人**: 1000信仰度達成
- **カオスマスター**: おおえのネタ100個処理
- **平和主義者**: 荒らし0個でクリア
- **スパチャマスター**: 単配信で高額スパチャ10回
- **鉄の心臓**: 体力満タンでクリア

### ランキング機能
- **ローカルランキング**: 端末内ベストスコア
- **レベル別記録**: 各レベルの最高記録
- **統計情報**: プレイ時間・総信仰度など

## 🛡️ 品質保証

### テスト項目
- **機能テスト**: 各コメント処理の動作確認
- **UI/UXテスト**: 操作性・視認性確認
- **パフォーマンステスト**: フレームレート・メモリ使用量
- **プラットフォームテスト**: PC・モバイル動作確認

### デバッグ機能
- **ゲーム状態表示**: 内部パラメータ確認
- **コメント強制生成**: テスト用機能
- **無敵モード**: デバッグ用ゴッドモード
- **タイムスケール調整**: スローモーション確認

---

## 📝 開発メモ

- **Unity 2022.3 LTS** 使用でクロスプラットフォーム対応
- **uGUI** でシンプルなUI構築
- **ScriptableObject** でデータ管理
- **New Input System** で統一された入力処理
- **Addressable Asset System** で効率的なアセット管理（必要に応じて）
- **アセットストア** の素材活用でアート制作コスト削減